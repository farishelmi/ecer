"use strict";(self.webpackChunkcloudecr=self.webpackChunkcloudecr||[]).push([[308],{716:(e,a,r)=>{r.r(a),r.d(a,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>i,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"transaction/signature","title":"Signature","description":"A signature is a HMAC-SHA256 hash string combination of a sequence of parameters and a secret key.","source":"@site/docs/transaction/signature.md","sourceDirName":"transaction","slug":"/transaction/signature","permalink":"/cloudecr/docs/transaction/signature","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"sidebar","previous":{"title":"Parameter","permalink":"/cloudecr/docs/transaction/parameter"},"next":{"title":"Sample Message","permalink":"/cloudecr/docs/transaction/sample-message"}}');var n=r(4848),s=r(1184);const i={},l="Signature",c={},d=[{value:"Example:",id:"example",level:2},{value:"Sale Request Payload",id:"sale-request-payload",level:3},{value:"Step 1: Sort Parameters Alphabetically",id:"step-1-sort-parameters-alphabetically",level:3},{value:"Step 2: Concatenate Parameter Values",id:"step-2-concatenate-parameter-values",level:3},{value:"Step 3: Generate HMAC-SHA256 Hash",id:"step-3-generate-hmac-sha256-hash",level:3},{value:"Resulting Hash",id:"resulting-hash",level:3}];function o(e){const a={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.header,{children:(0,n.jsx)(a.h1,{id:"signature",children:"Signature"})}),"\n",(0,n.jsxs)("ul",{children:[(0,n.jsx)("li",{children:"A signature is a HMAC-SHA256 hash string combination of a sequence of parameters and a secret key."}),(0,n.jsx)("li",{children:"Secret key is a server-side shared secret, this key is assigned to merchants by Fiuu."}),(0,n.jsx)("li",{children:"All parameters used in the message exchange will form a part of the signature hash except"}),(0,n.jsxs)("ol",{style:{marginBottom:"20px"},children:[(0,n.jsx)("li",{children:"Empty parameter (NOT zero)"}),(0,n.jsx)("li",{children:"Signature parameter itself"})]}),(0,n.jsx)("li",{children:"All parameter values that form a part of the signature hash must sort alphabetically based on parameter name."}),(0,n.jsx)("li",{children:"All parameters that form a part of the signature hash must be in their original form (not URL encoded)."}),(0,n.jsx)("li",{children:"All parameters that form a part of the signature hash are case sensitive."}),(0,n.jsx)("li",{children:"All strings will have leading and trailing whitespace stripped off."}),(0,n.jsx)("li",{children:"All signatures should include datetime to avoid duplication of transactions."})]}),"\n",(0,n.jsx)(a.h2,{id:"example",children:"Example:"}),"\n",(0,n.jsx)(a.p,{children:"We shall be using these secretKey, MID, and TID for this example."}),"\n",(0,n.jsx)("table",{children:(0,n.jsxs)("tbody",{children:[(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{style:{backgroundColor:"#0046ac",color:"#fff"},children:"MID"}),(0,n.jsx)("td",{children:"603778000000001"})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{style:{backgroundColor:"#0046ac",color:"#fff"},children:"TID"}),(0,n.jsx)("td",{children:"91100033"})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{style:{backgroundColor:"#0046ac",color:"#fff"},children:"merchantId"}),(0,n.jsx)("td",{children:"fiuuMerch1"})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{style:{backgroundColor:"#0046ac",color:"#fff"},children:"secretKey"}),(0,n.jsx)("td",{children:"75DC529B942513DFA77F43EC3451F137\u202f "})]})]})}),"\n",(0,n.jsx)(a.h3,{id:"sale-request-payload",children:"Sale Request Payload"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-json",children:'{\r\n  "transType": "sale",\r\n  "posId": "fiuuPos1",\r\n  "merchantId": "fiuuMerch1",\r\n  "deviceId": "fiuuDeviceId1",\r\n  "referenceId": "fiuuPosRefId1",\r\n  "referenceLabel": "Contrib ID",\r\n  "apiVersion": "v1",\r\n  "datetime": "20250115081928",\r\n  "transData": {\r\n    "transAmt": "1.00",\r\n    "paymentMethod": "bankCard",\r\n    "note": "This is a test note"\r\n  },\r\n  // generated hash signature\u2935\r\n  "signature": "1e64016959808ee62cd5f13f379314d15c0d06a776bda76d6bf2d4222d607eb2"\r\n}\n'})}),"\n",(0,n.jsx)(a.h3,{id:"step-1-sort-parameters-alphabetically",children:"Step 1: Sort Parameters Alphabetically"}),"\n",(0,n.jsx)(a.p,{children:"The parameter values should be ordered by their names in alphabetical order:"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{children:"{apiVersion} + {datetime} + {deviceId} + {merchantId} + {note} + {paymentMethod} + {posId} + {referenceId} + {transAmt} + {transType}\n"})}),"\n",(0,n.jsx)(a.h3,{id:"step-2-concatenate-parameter-values",children:"Step 2: Concatenate Parameter Values"}),"\n",(0,n.jsx)(a.p,{children:"Concatenate the actual values of the parameters in the sorted order:"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{children:"v120250115081928fiuuDeviceId1fiuuMerch1This is a test notebankCardfiuuPos1fiuuPosRefId1Contrib ID1.00sale\n"})}),"\n",(0,n.jsx)(a.h3,{id:"step-3-generate-hmac-sha256-hash",children:"Step 3: Generate HMAC-SHA256 Hash"}),"\n",(0,n.jsx)(a.p,{children:"Hash the concatenated string using the HMAC-SHA256 algorithm with the secret key:"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{children:"HMAC-SHA256(v120250115081928fiuuDeviceId1fiuuMerch1This is a test notebankCardfiuuPos1fiuuPosRefId1Contrib ID1.00sale)\n"})}),"\n",(0,n.jsx)(a.h3,{id:"resulting-hash",children:"Resulting Hash"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{children:"1e64016959808ee62cd5f13f379314d15c0d06a776bda76d6bf2d4222d607eb2\n"})})]})}function h(e={}){const{wrapper:a}={...(0,s.R)(),...e.components};return a?(0,n.jsx)(a,{...e,children:(0,n.jsx)(o,{...e})}):o(e)}},1184:(e,a,r)=>{r.d(a,{R:()=>i,x:()=>l});var t=r(6540);const n={},s=t.createContext(n);function i(e){const a=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function l(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:i(e.components),t.createElement(s.Provider,{value:a},e.children)}}}]);