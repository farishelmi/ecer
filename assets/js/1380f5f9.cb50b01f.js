"use strict";(self.webpackChunkcloudecr=self.webpackChunkcloudecr||[]).push([[223],{8929:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"flow-overview","title":"Flow Overview","description":"Bind-Terminal Flow","source":"@site/docs/flow-overview.md","sourceDirName":".","slug":"/flow-overview","permalink":"/cloudecr/docs/flow-overview","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"sidebar","previous":{"title":"Getting Started","permalink":"/cloudecr/docs/getting-started"},"next":{"title":"API Message Format","permalink":"/cloudecr/docs/transaction/api-message-format"}}');var s=t(4848),r=t(1184);const l={},o="Flow Overview",c={},a=[{value:"Bind-Terminal Flow",id:"bind-terminal-flow",level:2},{value:"Process Overview",id:"process-overview",level:4},{value:"Transaction Process Flow",id:"transaction-process-flow",level:2},{value:"Timeout Values",id:"timeout-values",level:2},{value:"Transaction Error Handling and Troubleshooting",id:"transaction-error-handling-and-troubleshooting",level:2}];function d(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h4:"h4",header:"header",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"flow-overview",children:"Flow Overview"})}),"\n",(0,s.jsx)(n.h2,{id:"bind-terminal-flow",children:"Bind-Terminal Flow"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.strong,{children:"Bind-Terminal"})," event is used to establish a one-time association between a newly installed Terminal/VT and a registered POS. This process enables the terminal to communicate with the POS via ",(0,s.jsx)(n.strong,{children:"cloudECR"}),". Once successfully bound, the terminal becomes accessible to the POS upon login."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Bind Terminal Flow",src:t(8837).A+"",width:"5413",height:"3375"})}),"\n",(0,s.jsx)(n.h4,{id:"process-overview",children:"Process Overview"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["The POS generates and displays a QR code containing a concatenated string of ",(0,s.jsx)(n.code,{children:"posID"})," and ",(0,s.jsx)(n.code,{children:"merchantID"}),"."]}),"\n",(0,s.jsx)(n.li,{children:"The terminal scans the QR code."}),"\n",(0,s.jsxs)(n.li,{children:["The terminal send ",(0,s.jsx)(n.code,{children:"bind-terminal"})," request to cloudECR."]}),"\n",(0,s.jsx)(n.li,{children:"cloudECR verifies and registers the terminal with the POS, returning a binding status as a Boolean response."}),"\n",(0,s.jsx)(n.li,{children:"After a successful login, an access token will be issued to the POS along with the token's expiry details."}),"\n"]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Note:"})," The binding process occurs ",(0,s.jsx)(n.strong,{children:"only once per terminal-POS pairing"}),". However, ",(0,s.jsx)(n.strong,{children:"re-binding"})," can be initiated from the terminal if needed. Both the POS and the terminal have the ability to unbind the connection."]}),"\n"]}),"\n",(0,s.jsx)("p",{style:{marginTop:"30px",fontWeight:"700"},children:"Optional Steps:"}),"\n",(0,s.jsxs)(n.ol,{start:"6",children:["\n",(0,s.jsxs)(n.li,{children:["The POS retrieves the terminal list using the ",(0,s.jsx)(n.code,{children:"GET /terminals"})," API to verify the binding process."]}),"\n",(0,s.jsx)(n.li,{children:"cloudECR verifies the request and returns the list of bound terminals."}),"\n"]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Note:"})," Access Token Expiry: 15 minutes/ 12.00am. Refresh Token expiry: 12.00am daily."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"transaction-process-flow",children:"Transaction Process Flow"}),"\n",(0,s.jsx)(n.p,{children:"The transaction process involves communication between the POS, cloudECR and Terminal/VT to authorize and complete a transaction. The following steps outline the end-to-end transaction flow:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Transaction Flow",src:t(9619).A+"",width:"5413",height:"3375"})}),"\n",(0,s.jsx)("p",{style:{fontWeight:"700",marginBottom:"0"},children:"1. Transaction Request (POS \u2192 cloudECR):"}),"\n",(0,s.jsx)(n.p,{children:"The POS system initiates a transaction request and transmits it to cloudECR for processing."}),"\n",(0,s.jsx)("p",{style:{fontWeight:"700",marginBottom:"0"},children:"2. Transaction Forwarding (cloudECR \u2192 Terminal/VT):"}),"\n",(0,s.jsx)(n.p,{children:"Upon receiving the request, cloudECR validates the transaction details and forwards the request to the designated Terminal/VT."}),"\n",(0,s.jsx)("p",{style:{fontWeight:"700",marginBottom:"0"},children:"3. Transaction Response (Terminal/VT \u2192 cloudECR):"}),"\n",(0,s.jsx)(n.p,{children:"The Terminal/VT communicates the transaction result, including approval or decline details, back to cloudECR."}),"\n",(0,s.jsx)("p",{style:{fontWeight:"700",marginBottom:"0"},children:"4. Final Transaction Response (cloudECR \u2192 POS):"}),"\n",(0,s.jsx)(n.p,{children:"cloudECR verifies the response and relays the final transaction status to the POS system. This process ensures secure and efficient transaction handling between all entities involved."}),"\n",(0,s.jsx)(n.h2,{id:"timeout-values",children:"Timeout Values"}),"\n",(0,s.jsx)(n.p,{children:"These are the recommended timeout values for each party."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Timeout Values",src:t(8638).A+"",width:"5938",height:"1319"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["POS timeout to receive a response from cloudECR: ",(0,s.jsx)(n.strong,{children:"80 seconds"}),"."]}),"\n",(0,s.jsx)(n.li,{children:"The process (cloudECR \u2192 Terminal/VT \u2192 Acquirer) must complete within this time."}),"\n",(0,s.jsx)(n.li,{children:"The Terminal/VT can cancel the transaction if necessary."}),"\n",(0,s.jsx)(n.li,{children:"Once the transaction leaves the POS, it must either be cancelled by the Terminal/VT or wait for the timeout, unless a transaction response is received."}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"transaction-error-handling-and-troubleshooting",children:"Transaction Error Handling and Troubleshooting"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Transaction Error Troubleshooting",src:t(8892).A+"",width:"5938",height:"1319"})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Issue"}),(0,s.jsx)(n.th,{children:"Node"}),(0,s.jsx)(n.th,{children:"Suggested Action"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Bind Terminal/VT Failed"}),(0,s.jsx)(n.td,{children:"-"}),(0,s.jsx)(n.td,{children:(0,s.jsx)("ol",{children:(0,s.jsxs)("li",{children:["Verify the devices' credentials",(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{children:"merchant ID"}),(0,s.jsx)("li",{children:"device ID"}),(0,s.jsx)("li",{children:"cloudECR enabled (Merchant Portal)"})]})]})})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"POS transaction request couldn't reach Terminal/VT"}),(0,s.jsx)(n.td,{children:"1, 2"}),(0,s.jsx)(n.td,{children:(0,s.jsxs)("ol",{children:[(0,s.jsx)("li",{children:"Verify the device's internet connection."}),(0,s.jsx)("li",{children:"Attempt the transaction again."})]})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Terminal/VT showing communication error messages after trigger transaction"}),(0,s.jsx)(n.td,{children:"3"}),(0,s.jsx)(n.td,{children:(0,s.jsxs)("ol",{children:[(0,s.jsx)("li",{children:"Check the internet connection of the Terminal/VT and try again."}),(0,s.jsx)("li",{children:"If the problem continues, contact Fiuu Support"})]})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"User is charged (Bank card) but transaction not success at Terminal/VT and no receipt issued"}),(0,s.jsx)(n.td,{children:"4"}),(0,s.jsx)(n.td,{children:(0,s.jsxs)("ol",{children:[(0,s.jsx)("li",{children:"Do not release the goods."}),(0,s.jsx)("li",{children:"Retry the transaction."}),(0,s.jsx)("li",{children:"The initial transaction will be refunded."}),(0,s.jsx)("li",{children:"Keep the receipt from the second transaction for Fiuu's reference if needed"})]})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"User is charged (eWallet) but transaction status shows Pending"}),(0,s.jsx)(n.td,{children:"4"}),(0,s.jsx)(n.td,{children:(0,s.jsxs)("ol",{children:[(0,s.jsx)("li",{children:"Do not release the goods."}),(0,s.jsx)("li",{children:"Perform a wallet inquiry to check the transaction status."})]})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Transaction success at Terminal/VT but the POS didn\u2019t receive any respond"}),(0,s.jsx)(n.td,{children:"5, 6"}),(0,s.jsx)(n.td,{children:(0,s.jsx)("ol",{children:(0,s.jsx)("li",{children:'Perform a "transfer-getLast event" to retrieve the recent transaction status.'})})})]})]})]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8837:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/bind-terminal-flow-f528d7f5491ba01c6024b3c3901d6b45.png"},8638:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/timeout-values-f1af860dd137bd8633c8a7404f9c217c.png"},8892:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/transaction-error-troubleshooting-d33b43f544dfb7bf6ac0c9843c0c61ee.png"},9619:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/transaction-flow-00d3b8480c74d66507c4c04edf5feb95.png"},1184:(e,n,t)=>{t.d(n,{R:()=>l,x:()=>o});var i=t(6540);const s={},r=i.createContext(s);function l(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);